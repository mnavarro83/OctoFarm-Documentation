(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{402:function(e,o,t){"use strict";t.r(o);var a=t(27),s=Object(a.a)({},(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[e._v("#")]),e._v(" Docker")]),e._v(" "),t("p",[e._v("Docker is a great tool! Using "),t("code",[e._v("docker-compose")]),e._v(" is better and "),t("code",[e._v("portainer")]),e._v(" is most awesome! Please read the following before continuing:"),t("br"),e._v("\nNOTE we assume you are familiar with "),t("code",[e._v("docker")]),e._v(" and "),t("code",[e._v("docker-compose")]),e._v(". These are great tools for isolating your software deployment (+), but it be quite new to some users (-).")]),e._v(" "),t("ul",[t("li",[e._v("We cannot support each custom scenario or setup!")]),e._v(" "),t("li",[e._v("Take good care of checking your device's memory limits, architecture and CPU power ("),t("code",[e._v("docker stats")]),e._v(" and for example "),t("code",[e._v("mem_limit: 400m")]),e._v(" for 400MB limit in docker-compose)")]),e._v(" "),t("li",[e._v("If your device's CPU hits high percentages a lot or memory usage is high, please check your OctoFarm network timeout settings and inspect your OctoPrint/network latencies.")])]),e._v(" "),t("h2",{attrs:{id:"tags"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tags"}},[e._v("#")]),e._v(" Tags")]),e._v(" "),t("p",[e._v("We provide "),t("code",[e._v("octofarm/octofarm:latest")]),e._v(", "),t("code",[e._v("octofarm/octofarm:alpine-latest")]),e._v(" and "),t("code",[e._v("octofarm/octofarm:monolithic-latest")])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("latest")]),e._v(" and "),t("code",[e._v("alpine-latest")]),e._v(" require you to run MongoDB or a MongoDB container (see compose below)")]),e._v(" "),t("li",[t("code",[e._v("monolithic")]),e._v(" does not require a separate MongoDB, but we at OctoFarm personally like MongoDB to be separate (docker = isolation remember?).")])]),e._v(" "),t("p",[e._v("You can check out the latest development version by replacing "),t("code",[e._v("-latest")]),e._v(" with "),t("code",[e._v("-dev")]),e._v(" so "),t("code",[e._v("octofarm/octofarm:dev")])]),e._v(" "),t("h2",{attrs:{id:"docker-run"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-run"}},[e._v("#")]),e._v(" Docker Run")]),e._v(" "),t("p",[e._v("You can get up and running quite easily with the command below. It's recommended to use the docker-compose instructions below for a more persistent configuration.")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("docker run -d --name octofarm -e "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"MONGO=mongodb://{ mongoip }/octofarm"')]),e._v(" -p4000:4000 octofarm/octofarm -e "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"TZ=America/Chicago"')]),e._v(" -v "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'{your persistent folder}/OctoFarm/scripts/'")]),e._v(":/scripts/"),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("':'")]),e._v("rw"),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("' -v '")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("your persistent folder"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/OctoFarm/logs/"),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("':'")]),e._v("/app/logs/"),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("':'")]),e._v("rw"),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("' -v '")]),e._v("./OctoFarm/images"),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("':'")]),e._v("/app/images"),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("':rw'")]),e._v("\n")])])]),t("p",[e._v("Environment Variables")]),e._v(" "),t("ul",[t("li",[e._v("MONGO = contains mongodb connection string")]),e._v(" "),t("li",[e._v('TZ = local timezone code e.g. "America/Chicago" Database of TimeZone Values Here')])]),e._v(" "),t("h2",{attrs:{id:"docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[e._v("#")]),e._v(" Docker Compose")]),e._v(" "),t("h3",{attrs:{id:"docker-images-latest-or-alpine-latest-with-separate-mongodb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-images-latest-or-alpine-latest-with-separate-mongodb"}},[e._v("#")]),e._v(" Docker images 'latest' or ':'alpine-latest' with separate MongoDb")]),e._v(" "),t("p",[t("strong",[e._v("Pay good attention that you have to configure your root-user's username and password for MongoDB and that OctoFarm needs it to work!")])]),e._v(" "),t("p",[e._v("Replace the values for "),t("code",[e._v("MONGO_ROOTUSER_HERE")]),e._v(", "),t("code",[e._v("MONGO_PASSWORD_HERE")]),e._v(" below!\nWe don't advise using MongoDB without username/password, although you can do so by removing the environment variables for MongoDB and OctoFarm. IF and ONLY IF you dont want a username/password, make sure that the URL makes sense in that "),t("strong",[e._v("special")]),e._v(" case: "),t("code",[e._v("MONGO= mongodb://mongo:27017/octofarm")]),e._v(".")]),e._v(" "),t("p",[e._v("Why the MongoDB "),t("code",[e._v("?authSource=admin")]),e._v(" addition, you might ask? Just to make sure the right table is checked for the username you setup, if that's the case. This table is named "),t("code",[e._v("admin")]),e._v(" by default. Glad you asked!")]),e._v(" "),t("div",{staticClass:"language-docker extra-class"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Just pick a compose spec version >3")]),e._v("\nversion: '3.4' \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# (Optional) named database volume (uncomment in case you dont want a local database volume folder, see below)")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# volumes:")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#   mongodb-data:")]),e._v("\n\nservices:\n  mongodb:\n    image: mongo:latest\n    container_name: mongodb\n    environment:\n      MONGO_INITDB_ROOT_USERNAME: MONGO_ROOTUSER_HERE\n      MONGO_INITDB_ROOT_PASSWORD: MONGO_PASSWORD_HERE\n      MONGO_INITDB_DATABASE: octofarm\n    ports:\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# HOST:CONTAINER")]),e._v("\n    - 27017:27017\n    volumes:\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Local volume (change to mongodb-data for a named volume folder)")]),e._v("\n    - ./mongodb-data:/data/db\n    restart: unless_stopped\n\n  octofarm:\n    container_name: octofarm\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# choose octofarm/octofarm:latest or octofarm/octofarm:alpine-latest    ")]),e._v("\n    image: octofarm/octofarm:latest\n    restart: always\n    mem_limit: 400m # Feel free to adjust! 400 MB is quite high and a safety limit.\n    ports:\n    - 4000:4000 # port of SYSTEM : port of CONTAINER\n    environment:\n    - MONGO=mongodb://MONGO_ROOTUSER_HERE:MONGO_PASSWORD_HERE@mongodb:27017/octofarm?authSource=admin\n    volumes:\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Volumes as local relative folders (validate with 'docker-compose config')")]),e._v("\n    - ./OctoFarm/logs:/app/logs\n    - ./OctoFarm/scripts:/app/scripts\n    - ./OctoFarm/images:/app/images\n")])])]),t("h3",{attrs:{id:"docker-image-monolithic-latest"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-monolithic-latest"}},[e._v("#")]),e._v(" Docker image 'monolithic-latest'")]),e._v(" "),t("p",[e._v("The monolithic image does not require MongoDB externally, but it also has less control over MongoDB setup:")]),e._v(" "),t("div",{staticClass:"language-docker extra-class"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[e._v(" octofarm-monolithic:\n    container_name: octofarm-monolithic\n    image: octofarm/octofarm:monolithic-latest\n    restart: always\n    volumes:\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Local volumes, can be made named")]),e._v("\n    - ./OctoFarm/logs:/app/logs   \n    - ./OctoFarm/scripts:/app/scripts\n    - ./OctoFarm/images:/app/images\n    - ./mongodb-data:/data/db \n    ports:\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# SYSTEM:CONTAINER")]),e._v("\n    - 4000:4000\n")])])]),t("h3",{attrs:{id:"docker-or-docker-compose-for-version-2-0-not-released-yet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-or-docker-compose-for-version-2-0-not-released-yet"}},[e._v("#")]),e._v(" Docker or docker-compose for version 2.0 (not released yet!)")]),e._v(" "),t("p",[e._v("In version 2.0 we will stop using MongoDB and move to a much simpler database called SQLite. This means that you won't have to do anything and you can remove your MongoDB database!\nOf course we will provide the tools to hop on to the 2.0 train, when the time comes. The only change is that the "),t("code",[e._v("monolithic-latest")]),e._v(" will become the same as the "),t("code",[e._v("latest")]),e._v(" image. Less setup, nice ey?")]),e._v(" "),t("p",[e._v("Enjoy using OctoFarm with docker and do share your big-flex juicy pics on "),t("a",{attrs:{href:"https://discord.octofarm.net",target:"_blank",rel:"noopener noreferrer"}},[e._v("Our Discord"),t("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);o.default=s.exports}}]);