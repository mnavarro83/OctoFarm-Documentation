<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | OctoFarms Documentation</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="OctoFarms official documentation">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.48e8e2bb.css" as="style"><link rel="preload" href="/assets/js/app.d94fa46e.js" as="script"><link rel="preload" href="/assets/js/2.965b894a.js" as="script"><link rel="preload" href="/assets/js/25.856c9d04.js" as="script"><link rel="preload" href="/assets/js/4.c8c44e52.js" as="script"><link rel="prefetch" href="/assets/js/10.261f954b.js"><link rel="prefetch" href="/assets/js/11.a44fc9fd.js"><link rel="prefetch" href="/assets/js/12.e22832b5.js"><link rel="prefetch" href="/assets/js/13.73ec3a66.js"><link rel="prefetch" href="/assets/js/14.daa3f4a0.js"><link rel="prefetch" href="/assets/js/15.6a45dbd6.js"><link rel="prefetch" href="/assets/js/16.955128cb.js"><link rel="prefetch" href="/assets/js/17.19f24dc8.js"><link rel="prefetch" href="/assets/js/18.b6d39cc0.js"><link rel="prefetch" href="/assets/js/19.5c66b6cf.js"><link rel="prefetch" href="/assets/js/20.5c3d0d74.js"><link rel="prefetch" href="/assets/js/21.3e9335c4.js"><link rel="prefetch" href="/assets/js/22.a5b45674.js"><link rel="prefetch" href="/assets/js/23.4a886ec7.js"><link rel="prefetch" href="/assets/js/24.19fd1ec4.js"><link rel="prefetch" href="/assets/js/26.03f91e4d.js"><link rel="prefetch" href="/assets/js/27.175c12ae.js"><link rel="prefetch" href="/assets/js/28.f94721e7.js"><link rel="prefetch" href="/assets/js/29.3ab3567c.js"><link rel="prefetch" href="/assets/js/3.307549ba.js"><link rel="prefetch" href="/assets/js/30.c63a3834.js"><link rel="prefetch" href="/assets/js/31.ca5d273e.js"><link rel="prefetch" href="/assets/js/5.35354b5a.js"><link rel="prefetch" href="/assets/js/6.e55b13fa.js"><link rel="prefetch" href="/assets/js/7.4abc5fac.js"><link rel="prefetch" href="/assets/js/8.2eeeb5ce.js"><link rel="prefetch" href="/assets/js/9.e3a3c066.js">
    <link rel="stylesheet" href="/assets/css/0.styles.48e8e2bb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="OctoFarms Documentation" class="logo"> <span class="site-name can-hide">OctoFarms Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/getting-started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/guides/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/installation/" class="nav-link router-link-active">
  Installation
</a></div><div class="nav-item"><a href="https://octofarm.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OctoFarm.net
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/OctoFarm/OctoFarm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/getting-started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/guides/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/installation/" class="nav-link router-link-active">
  Installation
</a></div><div class="nav-item"><a href="https://octofarm.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OctoFarm.net
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/OctoFarm/OctoFarm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Installation Instructions</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/installation/install-docker.html" aria-current="page" class="active sidebar-link">Docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/installation/install-docker.html#tags" class="sidebar-link">Tags</a></li><li class="sidebar-sub-header"><a href="/installation/install-docker.html#docker-run" class="sidebar-link">Docker Run</a></li><li class="sidebar-sub-header"><a href="/installation/install-docker.html#docker-compose" class="sidebar-link">Docker Compose</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/installation/install-docker.html#docker-images-latest-or-alpine-latest-with-separate-mongodb" class="sidebar-link">Docker images 'latest' or ':'alpine-latest' with separate MongoDb</a></li><li class="sidebar-sub-header"><a href="/installation/install-docker.html#docker-image-monolithic-latest" class="sidebar-link">Docker image 'monolithic-latest'</a></li><li class="sidebar-sub-header"><a href="/installation/install-docker.html#docker-or-docker-compose-for-version-2-0-not-released-yet" class="sidebar-link">Docker or docker-compose for version 2.0 (not released yet!)</a></li></ul></li></ul></li><li><a href="/installation/install-linux-debian.html" class="sidebar-link">Linux (Debian)</a></li><li><a href="/installation/install-linux-ubuntu.html" class="sidebar-link">Linux (Ubuntu)</a></li><li><a href="/installation/install-raspberry-pi.html" class="sidebar-link">Raspberry Pi</a></li><li><a href="/installation/setup-environment.html" class="sidebar-link">Environment Variables</a></li><li><a href="/installation/setup-service.html" class="sidebar-link">Service Setup</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h1> <p>Docker is a great tool! Using <code>docker-compose</code> is better and <code>portainer</code> is most awesome! Please read the following before continuing:<br>
NOTE we assume you are familiar with <code>docker</code> and <code>docker-compose</code>. These are great tools for isolating your software deployment (+), but it be quite new to some users (-).</p> <ul><li>We cannot support each custom scenario or setup!</li> <li>Take good care of checking your device's memory limits, architecture and CPU power (<code>docker stats</code> and for example <code>mem_limit: 400m</code> for 400MB limit in docker-compose)</li> <li>If your device's CPU hits high percentages a lot or memory usage is high, please check your OctoFarm network timeout settings and inspect your OctoPrint/network latencies.</li></ul> <h2 id="tags"><a href="#tags" class="header-anchor">#</a> Tags</h2> <p>We provide <code>octofarm/octofarm:latest</code>, <code>octofarm/octofarm:alpine-latest</code> and <code>octofarm/octofarm:monolithic-latest</code></p> <ul><li><code>latest</code> and <code>alpine-latest</code> require you to run MongoDB or a MongoDB container (see compose below)</li> <li><code>monolithic</code> does not require a separate MongoDB, but we at OctoFarm personally like MongoDB to be separate (docker = isolation remember?).</li></ul> <p>You can check out the latest development version by replacing <code>-latest</code> with <code>-dev</code> so <code>octofarm/octofarm:dev</code></p> <h2 id="docker-run"><a href="#docker-run" class="header-anchor">#</a> Docker Run</h2> <p>You can get up and running quite easily with the command below. It's recommended to use the docker-compose instructions below for a more persistent configuration.</p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker run -d --name octofarm -e <span class="token string">&quot;MONGO=mongodb://{ mongoip }/octofarm&quot;</span> -p4000:4000 octofarm/octofarm -e <span class="token string">&quot;TZ=America/Chicago&quot;</span> -v <span class="token string">'{your persistent folder}/OctoFarm/scripts/'</span>:/scripts/<span class="token string">':'</span>rw<span class="token string">' -v '</span><span class="token operator">&lt;</span>your persistent folder<span class="token operator">&gt;</span>/OctoFarm/logs/<span class="token string">':'</span>/app/logs/<span class="token string">':'</span>rw<span class="token string">' -v '</span>./OctoFarm/images<span class="token string">':'</span>/app/images<span class="token string">':rw'</span>
</code></pre></div><p>Environment Variables</p> <ul><li>MONGO = contains mongodb connection string</li> <li>TZ = local timezone code e.g. &quot;America/Chicago&quot; Database of TimeZone Values Here</li></ul> <h2 id="docker-compose"><a href="#docker-compose" class="header-anchor">#</a> Docker Compose</h2> <h3 id="docker-images-latest-or-alpine-latest-with-separate-mongodb"><a href="#docker-images-latest-or-alpine-latest-with-separate-mongodb" class="header-anchor">#</a> Docker images 'latest' or ':'alpine-latest' with separate MongoDb</h3> <p><strong>Pay good attention that you have to configure your root-user's username and password for MongoDB and that OctoFarm needs it to work!</strong></p> <p>Replace the values for <code>MONGO_ROOTUSER_HERE</code>, <code>MONGO_PASSWORD_HERE</code> below!
We don't advise using MongoDB without username/password, although you can do so by removing the environment variables for MongoDB and OctoFarm. IF and ONLY IF you dont want a username/password, make sure that the URL makes sense in that <strong>special</strong> case: <code>MONGO= mongodb://mongo:27017/octofarm</code>.</p> <p>Why the MongoDB <code>?authSource=admin</code> addition, you might ask? Just to make sure the right table is checked for the username you setup, if that's the case. This table is named <code>admin</code> by default. Glad you asked!</p> <div class="language-docker extra-class"><pre class="language-docker"><code><span class="token comment"># Just pick a compose spec version &gt;3</span>
version: '3.4' 

<span class="token comment"># (Optional) named database volume (uncomment in case you dont want a local database volume folder, see below)</span>
<span class="token comment"># volumes:</span>
<span class="token comment">#   mongodb-data:</span>

services:
  mongodb:
    image: mongo:latest
    container_name: mongodb
    environment:
      MONGO_INITDB_ROOT_USERNAME: MONGO_ROOTUSER_HERE
      MONGO_INITDB_ROOT_PASSWORD: MONGO_PASSWORD_HERE
      MONGO_INITDB_DATABASE: octofarm
    ports:
     <span class="token comment"># HOST:CONTAINER</span>
    - 27017:27017
    volumes:
    <span class="token comment"># Local volume (change to mongodb-data for a named volume folder)</span>
    - ./mongodb-data:/data/db
    restart: unless_stopped

  octofarm:
    container_name: octofarm
    <span class="token comment"># choose octofarm/octofarm:latest or octofarm/octofarm:alpine-latest    </span>
    image: octofarm/octofarm:latest
    restart: always
    mem_limit: 400m # Feel free to adjust! 400 MB is quite high and a safety limit.
    ports:
    - 4000:4000 # port of SYSTEM : port of CONTAINER
    environment:
    - MONGO=mongodb://MONGO_ROOTUSER_HERE:MONGO_PASSWORD_HERE@mongodb:27017/octofarm?authSource=admin
    volumes:
    <span class="token comment"># Volumes as local relative folders (validate with 'docker-compose config')</span>
    - ./OctoFarm/logs:/app/logs
    - ./OctoFarm/scripts:/app/scripts
    - ./OctoFarm/images:/app/images
</code></pre></div><h3 id="docker-image-monolithic-latest"><a href="#docker-image-monolithic-latest" class="header-anchor">#</a> Docker image 'monolithic-latest'</h3> <p>The monolithic image does not require MongoDB externally, but it also has less control over MongoDB setup:</p> <div class="language-docker extra-class"><pre class="language-docker"><code> octofarm-monolithic:
    container_name: octofarm-monolithic
    image: octofarm/octofarm:monolithic-latest
    restart: always
    volumes:
    <span class="token comment"># Local volumes, can be made named</span>
    - ./OctoFarm/logs:/app/logs   
    - ./OctoFarm/scripts:/app/scripts
    - ./OctoFarm/images:/app/images
    - ./mongodb-data:/data/db 
    ports:
    <span class="token comment"># SYSTEM:CONTAINER</span>
    - 4000:4000
</code></pre></div><h3 id="docker-or-docker-compose-for-version-2-0-not-released-yet"><a href="#docker-or-docker-compose-for-version-2-0-not-released-yet" class="header-anchor">#</a> Docker or docker-compose for version 2.0 (not released yet!)</h3> <p>In version 2.0 we will stop using MongoDB and move to a much simpler database called SQLite. This means that you won't have to do anything and you can remove your MongoDB database!
Of course we will provide the tools to hop on to the 2.0 train, when the time comes. The only change is that the <code>monolithic-latest</code> will become the same as the <code>latest</code> image. Less setup, nice ey?</p> <p>Enjoy using OctoFarm with docker and do share your big-flex juicy pics on <a href="https://discord.octofarm.net" target="_blank" rel="noopener noreferrer">Our Discord<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/OctoFarm/OctoFarm-Documentation/edit/master/src/installation/install-docker.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.d94fa46e.js" defer></script><script src="/assets/js/2.965b894a.js" defer></script><script src="/assets/js/25.856c9d04.js" defer></script><script src="/assets/js/4.c8c44e52.js" defer></script>
  </body>
</html>
